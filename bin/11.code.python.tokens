import string import sys import re def main ( ) : pats = map ( chomp , sys. stdin. readlines ( ) ) bigpat = ( + |. join ( pats ) + ) prog = re. compile ( bigpat ) for file in sys. argv [ 1.0 : ] : try : fp = open ( file , r ) except IOError , msg : print %s: %s % ( file , msg ) continue lineno = 0.0 while 1.0 : line = fp. readline ( ) if not line : break lineno = lineno + 1.0 if prog. search ( line ) : print %s:%s:%s % ( file , lineno , line ) , def chomp ( s ) : return s. rstrip ( ) if __name__ == __main__ : main ( )